<!DOCTYPE html>
<html lang="de" class="loading">
	<head>
		<meta charset="utf-8">
		<meta id="theme_color_meta" name="theme-color" content="">
		<!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>
		<title>Biblio</title>
		<link rel='stylesheet' type='text/css' href='/css/style.css'>
		<link rel="shortcut icon" type="image/x-icon" href="assets/favicon.webp">
		<!-- <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> -->
		<link href="/css/select2.min.css" rel="stylesheet" />
		<link href="/css/animate.css" rel="stylesheet" />
		<link href="/css/loading.css" rel="stylesheet" />
		<link href="/css/loading-btn.css" rel="stylesheet" />
		<link href="/css/pikaday.css" rel="stylesheet" />
		<!-- <link rel="stylesheet" href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css"> -->
		<script src="/js/js_bundle.js" async></script>
		<script src="/js/api.js" async></script>
		<script src="/js/functions.js" async></script>
		<script src="/js/snowstorm-min.js" async></script>
		<script src="/js/pikaday.js" async></script>
		<script src="/js/sweetalert2.all.min.js" async></script>
		<!-- <script>
			import("/js/js_bundle.js");
			import("/js/api.js");
			import("/js/functions.js");
			import("/js/sweetalert2.all.min.js");
			import("/js/snowstorm-min.js");
			onload();
		</script> -->
	</head>
	<body onload="onload();">
		<p style="position: absolute; bottom: 15px;left: 0px; right: 0px;color:red;" id="loading_error"></p>
		<div id="particles-js"></div>
		<div style="display: none;" class="count-particles"> <span class="js-count-particles">--</span> particles </div>
		<svg style="width: 0px;height: 0px;">
			<defs>
				<linearGradient id="color_gradient" x1="0%" y1="0%" x2="100%" y2="100%">
					<stop offset="0%" style="stop-color: var(--gradient_color1);stop-opacity:1"></stop>
					<stop offset="100%" style="stop-color: var(--gradient_color2);stop-opacity:1"></stop>
				</linearGradient>
			</defs>
		</svg>
		<svg>
			<defs>
				<g id="search_icon">
					<path fill="url(#color_gradient)" d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
					<path d="M0 0h24v24H0z" fill="none"></path>
				</g>
				<g id="loading_color">
					<circle cx="50" cy="50" ng-attr-r="{{config.radius}}" ng-attr-stroke-width="{{config.width}}" ng-attr-stroke="{{config.stroke}}" ng-attr-stroke-dasharray="{{config.dasharray}}" fill="none" stroke-linecap="round" r="40" stroke-width="4" stroke="url(#color_gradient)" stroke-dasharray="62.83185307179586 62.83185307179586" transform="rotate(265.18 50 50)"><animateTransform attributeName="transform" type="rotate" calcMode="linear" values="0 50 50;360 50 50" keyTimes="0;1" dur="1s" begin="0s" repeatCount="indefinite"></animateTransform></circle>
				</g>
			</defs>
		</svg>
		<svg>
			<defs>
				<g id="search_icon_white">
					<path fill="white" d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
					<path d="M0 0h24v24H0z" fill="none"></path>
				</g>
			</defs>
		</svg>
		<div id="login_div">
			<h1 id="login_h">Login</h1>
			<p id="login_error_message" class="error_message"></p>
			<form name="login_form" id="login_form" onsubmit="return false">
				<input type="text" class="login_input input_gray input_focus_color" id="login_email" placeholder="Email" autocomplete="username" autofocus>
				<input autocomplete="current-password" type="password" class="login_input input_gray input_focus_color" id="login_passwort" placeholder="Passwort">
				<br>
				<button style="width: 30%;" id="login_button" onclick="login();" class="button">Login</button>
			</form>
		</div>
		<div id="main">
			<div style="display: flex; flex-shrink: 0;" id="nav_div">
				<ul class="nav_ul" style="flex-grow: 15;">
					<li id="nav_li_side1" class="nav_li"><a class="nav_a" id="nav_a_side1" onclick="switchToSide(1);">Medien E/A</a></li>
					<li id="nav_li_side2" class="nav_li"><a class="nav_a" id="nav_a_side2" onclick="switchToSide(2);">Katalogisierung</a></li>
					<li id="nav_li_side3" class="nav_li"><a class="nav_a" id="nav_a_side3" onclick="switchToSide(3);">Schüler</a></li>
					<li id="nav_li_side4" class="nav_li"><a class="nav_a" id="nav_a_side4" onclick="switchToSide(4);">Listen</a></li>
					<li id="nav_li_side5" class="nav_li"><a class="nav_a" id="nav_a_side5" onclick="switchToSide(5);">Verwaltung</a></li>
				</ul>
				<div id="navbar_settings_icon" style="float: right; width: fit-content; background-color: rgb(51, 51, 51);" onclick="open_settings_menu();"><img id="navbar_settings_img" src="/assets/settings_white.svg" style="height: 100%;"></div>
				<ul class="nav_ul">
					<li class="nav_li" style="float: right;" onclick="logout();"><a class="nav_a">Logout</a></li>
				</ul>
			</div>
			<div style="display: none;" id="nav_div_mobile">
				<ul class="nav_ul_mobile" style="flex-grow: 15;height: 100%;">
					<li style="height: 100%;"><a onclick="open_mobile_sidenav();" style="height: 100%;"><img id="navbar_mobile_menu_img" src="/assets/menu_white.svg" style="height: 100%;"></a></li>
				</ul>
			</div>
			<div id="mobile_sidenav" class="sidenav">
				<a href="javascript:void(0)" class="closebtn" onclick="close_mobile_sidenav();">&times;</a>
				<a id="mobile_sidenav_a_side1" onclick="switchToSide(1);">Medien E/A</a>
				<a id="mobile_sidenav_a_side2" onclick="switchToSide(2);">Katalogisierung</a>
				<a id="mobile_sidenav_a_side3" onclick="switchToSide(3);">Schüler</a>
				<a id="mobile_sidenav_a_side4" onclick="switchToSide(4);">Listen</a>
				<a id="mobile_sidenav_a_side5" onclick="switchToSide(5);">Verwaltung</a>
				<a onclick="logout();">Logout</a>
			</div>
			<div id="books_div" class="side">
				<div class="book_div_horizontal" id="books_choose_side_mobile">
					<a id="switch_books_side_mobile_button0" style="font-weight: bold;" onclick="switch_books_side_mobile(0);">zurückgeben</a>
					<a id="switch_books_side_mobile_button1" onclick="switch_books_side_mobile(1);">ausleihen</a>
				</div>
				<div class="book_div_horizontal">
					<div class="book_div_padding book_div_left">
						<h1 style="text-align: center">Medium zurückgeben</h1>
					</div>
					<div class="book_div_padding book_div_right">
						<h1 style="text-align: center">Medium ausleihen</h1>
					</div>
				</div>
				<div class="book_div_horizontal">
					<div class="book_div_padding book_div_left">
						<p id="return_media_error_message" class="error_message"></p>
					</div>
					<div class="book_div_padding book_div_right">
						<p id="lend_media_error_message" class="error_message"></p>
					</div>
				</div>
				<div class="book_div_horizontal">
					<div class="book_div_padding book_div_left">

					</div>
					<div class="book_div_padding book_div_right">
						<div><select onchange="refresh_medias_table();" id="lend_student_select" name="state"></select></div>
						<br>
					</div>
				</div>
				<div class="book_div_horizontal">
					<div class="book_div_padding book_div_left">
						<div class="book_input_div mobile_seperate_lines">
							<input id="media_return_input" placeholder="Barcode" autocomplete="off" type="text" class="input_gray input_focus_color">
							<button class="button ld-ext-right" id="media_return_button">
								<span>zurückgeben</span>
								<div style="font-size:16px" class="ld ld-ring ld-cycle not_affected_by_color_theme"></div>
							</button>
						</div>
					</div>
					<div class="book_div_padding book_div_right">
						<div class="book_input_div">
							<input style="width: 40%;" onkeypress="if (event.keyCode==13){ lend_button_clicked('lend_input_box','date_select',0);}" id="lend_input_box" type="text" placeholder="Barcode" autocomplete="off" class="input_gray input_focus_color">
							<select style="width: 30%;" class="select" id="date_select">
								<option value="">Datum auswählen</option>
							</select>
							<button style="margin: 10px 0 10px 0;width: 30%" onclick="lend_button_clicked('lend_input_box','date_select',0);" class="button" id="media_lend_button">ausleihen</button>
						</div>
						<div class="book_input_div">
							<input style="width: 40%;" type="text" onkeypress="if (event.keyCode==13){ lend_button_clicked('lend_input_box_holiday','date_select_holiday',1);}" id="lend_input_box_holiday" placeholder="Barcode" autocomplete="off" class="input_gray input_focus_color">
							<select style="width: 30%;" class="select" id="date_select_holiday">
								<option value="">Datum auswählen</option>
							</select>
							<button style="margin: 10px 0 10px 0;width: 30%;" onclick="lend_button_clicked('lend_input_box_holiday','date_select_holiday',1);" class="button" id="media_lend_button_holiday">Ferienausleihe</button>
						</div>
						<br>
						<div style="width: 100%; display: flex;">
							<button class="button" id="edit_student_button" style="margin-left: auto; margin-right: auto;">Schüler bearbeiten</button>
						</div>
					</div>
				</div>
				<div class="book_div_horizontal">
					<div class="book_div_padding book_div_left">
						<h2 class="text_centered">Zuletzt zurückgegeben:</h2>
						<table class="table" id="return_history_table" style="margin: auto;width: 100%;">
							<tr class="tr">
								<th class="td">Buch</th>
								<th class="td">Barcode</th>
								<th class="td">Schüler</th>
								<th class="td">Zeit</th>
								<th class="td">rückgängig</th>
							</tr>
						</table>
					</div>
					<div class="book_div_padding book_div_right">
						<h2 style="text-align: center;">Medien des Schülers:</h2>
						<table class="table" style="margin: auto;width: 100%;" id="ausleihen_tabelle">
							<tr class="tr_headline">
								<th class="td">Name</td>
								<th class="td">Barcode</td>
								<th class="td">überfällig</td>
								<th class="td">Ferienausleihe</td>
							</tr>
						</table>
					</div>
				</div>
				<div style="flex-grow: 15;" class="book_div_horizontal">
					<div class="book_div_padding book_div_left"></div>
					<div class="book_div_padding book_div_right"></div>
				</div>
			</div>
			<div id="katalogisierung_div" class="side">
				<h1 class="text_centered">Katalogisierung</h1>
				<div id="media_search_side1">
					<div id="media_search_search_bar" class="mobile_seperate_lines">
						<div style="display: flex;flex-direction: row;align-items: center;" class="small_spacer">
							<input type="text" id="media_search_input" class="input_gray input_focus_color search_input" autocomplete="off">
							<svg onmouseenter="search_button_color_change(1,this);" onmouseleave="search_button_color_change(0,this);" onclick="refresh_media_search();" class="search_button">
								<use xlink:href="#search_icon"/>
							</svg>
						</div>
						<select class="select small_spacer" id="catalog_subject_select">
							<option value="-1">alle Fächer</option>
						</select>
						<select class="select small_spacer" id="catalog_school_year_select">
							<option value="-1">alle Jahrgangsstufen</option>
						</select>
					</div>
					<br>
					<div style="width: 100%;">
						<div style="display: flex; margin: auto; width: fit-content;">
							<button class="button" style="margin-left: 5px; margin-right: 5px;" onclick="new_media();">neues Medium</button>
						</div>
					</div>
					<div style="width: 100%;">
						<table style="width: 90%;margin: auto;" id="media_search_table" class="table">
							<th class="td">id</th>
							<th class="td">Titel</th>
							<th class="td">Autor</th>
							<th class="td">Verlag</th>
							<th class="td">Preis</th>
							<th class="td">Schuljahr</th>
							<th class="td">Typ</th>
						</table>
					</div>
				</div>
				<div id="media_search_side2" style="display: none;">
					<div id="media_details_back" onclick="switch_media_search_side(0);">
						<img id="catalog_back_button" style="margin: auto;"></img>
					</div>
					<table id="media_details_table" class="table">
						<tr>
							<th class="td">Titel</th>
							<td id="catalog_medium_title" class="td" onclick="th_to_input(this.id);"></td>
						</tr>
						<tr>
							<th class="td">Fach</th>
							<td id="catalog_medium_subject" class="td">
								<select id="catalog_medium_subject_select" onclick="editing_input_changed(this.id);" class="select"></select>
							</td>
						</tr>
						<tr>
							<th class="td">Jahrgangsstufe</th>
							<!-- <td id="catalog_medium_school_year" class="td" onclick="th_to_input(this.id);"></td> -->
							<td class="td" id="catalog_medium_school_year">
								<select id="catalog_medium_school_year_select" onclick="editing_input_changed(this.id);" class="select"></select>
							</th>
						</tr>
						<tr>
							<th class="td">Autor</th>
							<td id="catalog_medium_author" class="td" onclick="th_to_input(this.id);"></td>
						</tr>
						<tr>
							<th class="td">Verlag</th>
							<td id="catalog_medium_publisher" class="td" onclick="th_to_input(this.id);"></td>
						</tr>
						<tr>
							<th class="td">Preis</th>
							<td id="catalog_medium_price" class="td" onclick="th_to_input(this.id);"></td>
						</tr>
						<tr>
							<th class="td">Typ</th>
							<td id="catalog_medium_type" class="td">
								<select id="catalog_medium_type_select" onclick="editing_input_changed(this.id);" class="select"></select>
							</td>
						</tr>
					</table>
					<div id="selected_media_operations">
						<button class="button" style="margin-left: 5px; margin-right: 5px;" onclick="remove_media(current_media_id);">Medium löschen</button>
					</div>
					<br>
					<h2 class="text_centered">Exemplare</h2>
					<div id="selected_media_instances_operations" class="mobile_seperate_lines">
						<button class="button small_spacer" onclick="remove_all_selected_media_instances(0);">ausgewähte löschen</button>
						<button class="button small_spacer" onclick="return_all_selected_media_instances(0);">ausgewähte zurückgeben</button>
						<button class="button small_spacer" onclick="new_media_instance(current_media_id);">neues Exemplar</button>
					</div>
					<table id="media_details_instances_table" style="margin-left: auto; margin-right: auto;" class="table">
						<tr>
							<th class="td">Barcode</td>
							<th class="td">ausgeliehen an</th>
							<th class="td">ausgeliehen bis</th>
							<th class="td">Ferienausleihe</th>
						</tr>
					</table>
					<br>
				</div>
			</div>
			<div id="schüler_div" class="side">
				<h1 class="text_centered">Schüler</h1>
				<div id="student_search_side1" style="display: flex;flex-direction: row;flex-wrap: wrap;align-items: center; width:100%;">
					<div id="student_search_search_bar" class="mobile_seperate_lines">
						<div style="display: flex;flex-direction: row;align-items: center;">
							<input type="text" id="student_search_input" class="input_gray input_focus_color search_input" autocomplete="off">
							<svg onmouseenter="search_button_color_change(1,this);" onmouseleave="search_button_color_change(0,this);" onclick="refreshStudentSearch();" class="search_button">
								<use xlink:href="#search_icon"/>
							</svg>
						</div>
						<select style="margin-left: 12px;" class="select" id="students_class_select">
							<option value="-1">alle Klassen</option>
						</select>
					</div>
					<br>
					<div style="width: 100%;">
						<div style="display: flex; margin: auto; width: fit-content;">
							<button class="button" style="margin-left: 5px; margin-right: 5px;" onclick="new_student();">neuer Schüler</button>
						</div>
					</div>
					<div style="width: 100%;">
						<table style="width: 90%;margin: auto;" id="student_search_table" class="table">
							<th class="td">id</th>
							<th class="td">Name</th>
							<th class="td">Geburtstag</th>
							<th class="td">Klasse</th>
						</table>
					</div>
				</div>
				<div id="student_search_side2" style="display: none;">
					<div id="student_details_back" onclick="switch_student_search_side(0);">
						<img id="student_back_button" style="margin: auto;"></img>
					</div>
					<table id="media_details_table" class="table">
						<tr>
							<th class="td">Name</th>
							<td id="student_editing_name" class="td" onclick="th_to_input(this.id);"></td>
						</tr>
						<tr>
							<th class="th">Klasse</th>
							<td class="td"><select id="student_editing_class" class="select" onchange="editing_input_changed(this.id)"></select></td>
						</tr>
					</table>
					<div id="selected_student_operations">
						<button class="button" style="margin-left: 5px; margin-right: 5px;" onclick="remove_student(current_student_id);">Schüler löschen</button>
					</div>
					<br>
					<h2 class="text_centered">ausgeliehene Exemplare:</h2>
					<br>
					<div id="selected_media_instances_operations" style="display: flex; margin: auto; width: fit-content;">
						<button class="button" style="margin-left: 5px; margin-right: 5px;" onclick="remove_all_selected_media_instances(1);">ausgewähte löschen</button>
						<button class="button" style="margin-left: 5px; margin-right: 5px;" onclick="return_all_selected_media_instances(1);">ausgewähte zurückgeben</button>
					</div>
					<table style="margin: auto;" id="student_search_medias" class="table">
						<tr>
							<th class="td"><input type="checkbox"></input></th>
							<th class="td">Titel</th>
							<th class="td">Barcode</th>
							<th class="td">verliehen bis</th>
							<th class="td">überfällig</th>
							<th class="td">Ferienausleihe</th>
						</tr>
					</table>
				</div>
			</div>
			<div  id="listen_div" class="side">
				<h1 class="text_centered">Listen</h1>
				<details style="width: 75%;margin: auto;" open>
					<summary>Überfällige Medien</summary>
					<table class="table" id="overdue_table">
						<tr class="tr">
							<th class="td">Medium Name</th>
							<th class="td">Barcode</th>
							<th class="td">Schüler Name</th>
							<th class="td">Klasse</th>
						</tr>
					</table>
				</details>
				<br>
				<details style="width: 75%;margin: auto;" open>
					<summary>Ferienausleihe</summary>
					<table class="table" id="overdue_holiday_table">
						<tr>
							<th class="td">Medium Name</th>
							<th class="td">Barcode</th>
							<th class="td">Schüler Name</th>
							<th class="td">Klasse</th>
						</tr>
					</table>
				</details>
			</div>
			<div id="admin_div" class="side" style="display: flex; flex-direction: column;">
				<h1 class="text_centered">Verwaltung</h1>
				<div style="display: flex;flex-grow: 25;">
					<div id="admin_navigation_div" style="width: 30%; flex-grow: 25; border-right: #ddd 2px solid;">
						<div class="admin_navigation_item admin_navigation_item_selected" id="options_navigation_side0" onclick="switch_options_side(0);"><p>Klassen</p></div>
						<div class="admin_navigation_item" id="options_navigation_side1" onclick="switch_options_side(1);"><p>Jahrgangsstufen</p></div>
						<div class="admin_navigation_item" id="options_navigation_side2" onclick="switch_options_side(2);"><p>Typen</p></div>
						<br>
						<div class="admin_navigation_item" id="options_navigation_side3" onclick="switch_options_side(3);"><p>Design</p></div>
						<div class="admin_navigation_item" id="options_navigation_side4" onclick="switch_options_side(4);"><p>Einstellungen</p></div>
						<div class="admin_navigation_item" id="options_navigation_side5" onclick="switch_options_side(5);"><p>Statistiken</p></div>
					</div>
					<div id="admin_main" style="width: 70%; flex-grow: 25;">
						<div class="options_side" id="options_classes">
							<h2 class="text_centered">Klassen</h1>
							<br>
							<div class="mobile_seperate_lines" style="margin: auto; width: fit-content; display: flex;">
								<button class="button" style="margin-left: 5px; margin-right: 5px;">ausgewählte zusammenlegen</button>
								<button class="button" style="margin-left: 5px; margin-right: 5px;">ausgewählte löschen</button>
								<button class="button" style="margin-left: 5px; margin-right: 5px;">neues Schuljahr</button>
							</div>
							<table class="table" id="admin_classes_table" style="margin: auto;">
								<tr>
									<th class="td">
										<input type="checkbox" id="admin_classes_select_all"></input>
									</th>
									<th class="td">id</th>
									<th class="td">Name Teil 1</th>
									<th class="td">Name Teil 2</th>
									<th class="td">Schülerzahl</th>
								</tr>
							</table>
						</div>
						<div class="options_side" id="options_school_years">
							<h2 class="text_centered">Jahrgangsstufen</h1>
						</div>
						<div class="options_side" id="options_types">
							<h2 class="text_centered">Medium Typen</h1>
						</div>
						<div class="options_side" id="options_design">
							<h2 class="text_centered">Design</h2>
						</div>
						<div class="options_side" id="options_settings">
							<h2 class="text_centered">Einstellungen</h2>
						</div>
						<div class="options_side" id="options_metrics">
							<h2 class="text_centered">Statistiken</h2>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>
